<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lieeber&#39;s Blog</title>
  <subtitle>这是一个网站</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-07-06T02:51:59.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>lieeber</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>自定义绘画View</title>
    <link href="http://yoursite.com/2017/07/05/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%98%E7%94%BBView/"/>
    <id>http://yoursite.com/2017/07/05/自定义绘画View/</id>
    <published>2017-07-05T12:39:04.000Z</published>
    <updated>2017-07-06T02:51:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>买了个ipad pro，发现用proCreate画画挺有意思，于是决定用Andorid实现一个自定义View画板效果。</p>
<a id="more"></a>
<h3 id="运行效果"><a class="header-anchor" href="#运行效果">¶</a>运行效果</h3>
<img height="400" src="/video/drawsomething.gif">
<h3 id="先贴代码-再分析"><a class="header-anchor" href="#先贴代码-再分析">¶</a>先贴代码，再分析</h3>
<h4 id="继承view-绘制画板"><a class="header-anchor" href="#继承view-绘制画板">¶</a>继承View，绘制画板</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by lieeber on 2017/6/28.</div><div class="line"> * 自定义画板，可以更换画笔颜色，粗细，实现了前进，后退，保存到本地等功能。</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DrawSomethingView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Paint linePaint;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Paint paintPaint;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Path fillPath;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Paint eraserPaint;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> downX;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> downY;</div><div class="line">    <span class="keyword">private</span> Path linePath;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> DRAW_LINE = <span class="number">0</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> DRAW_FILL = <span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> DRAW_PAINT = <span class="number">2</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> DRAW_ERASER = <span class="number">3</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> drawStyle = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> lineColor = Color.BLACK;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> paintColor = Color.BLUE;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> lineWidth = <span class="number">20</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> paintWidthProgress = <span class="number">50</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> lineWidthProgress = <span class="number">50</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> paintWidth = <span class="number">70</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> eraserWidthProgress = <span class="number">50</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> eraserWidth = <span class="number">100</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getEraserWidthProgress</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> eraserWidthProgress;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEraserWidthProgress</span><span class="params">(<span class="keyword">float</span> eraserWidthProgress)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.eraserWidthProgress = eraserWidthProgress;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getEraserWidth</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> eraserWidth;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEraserWidth</span><span class="params">()</span> </span>&#123;</div><div class="line">        eraserPaint.setStrokeWidth(eraserWidth * eraserWidthProgress / <span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getPaintWidthProgress</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> paintWidthProgress;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPaintWidthProgress</span><span class="params">(<span class="keyword">float</span> paintWidthProgress)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.paintWidthProgress = paintWidthProgress;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getLineWidthProgress</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> lineWidthProgress;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLineWidthProgress</span><span class="params">(<span class="keyword">float</span> lineWidthProgress)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.lineWidthProgress = lineWidthProgress;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLineColor</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> lineColor;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLineColor</span><span class="params">(<span class="keyword">int</span> lineColor)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.lineColor = lineColor;</div><div class="line">        linePaint.setColor(lineColor);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPaintColor</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> paintColor;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPaintColor</span><span class="params">(<span class="keyword">int</span> paintColor)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.paintColor = paintColor;</div><div class="line">        paintPaint.setColor(paintColor);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLineWidth</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> lineWidth;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLineWidth</span><span class="params">()</span> </span>&#123;</div><div class="line">        linePaint.setStrokeWidth(lineWidth * lineWidthProgress / <span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPaintWidth</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> paintWidth;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPaintWidth</span><span class="params">()</span> </span>&#123;</div><div class="line">        paintPaint.setStrokeWidth(paintWidth * paintWidthProgress / <span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> ArrayList&lt;PathBean&gt; pathlist = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    <span class="keyword">private</span> ArrayList&lt;PathBean&gt; deletePathList = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Canvas mCanvas;</div><div class="line">    <span class="keyword">private</span> Bitmap mBitmap;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> viewWidth;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> viewHeight;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DrawSomethingView</span><span class="params">(Context context, @Nullable AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        linePaint = <span class="keyword">new</span> Paint(Paint.ANTI_ALIAS_FLAG | Paint.DITHER_FLAG);</div><div class="line">        linePaint.setStyle(Style.STROKE);</div><div class="line">        linePaint.setColor(lineColor);</div><div class="line">        linePaint.setStrokeWidth(lineWidth * lineWidthProgress / <span class="number">100</span>);</div><div class="line">        linePaint.setPathEffect(<span class="keyword">new</span> CornerPathEffect(<span class="number">100f</span>));</div><div class="line">        linePaint.setStrokeCap(Cap.ROUND);</div><div class="line">        linePaint.setStrokeJoin(Join.ROUND);</div><div class="line"></div><div class="line">        paintPaint = <span class="keyword">new</span> Paint();</div><div class="line">        paintPaint.setStyle(Style.STROKE);</div><div class="line">        paintPaint.setColor(paintColor);</div><div class="line">        paintPaint.setStrokeWidth(paintWidth * paintWidthProgress / <span class="number">100</span>);</div><div class="line">        paintPaint.setStrokeCap(Cap.ROUND);</div><div class="line">        paintPaint.setPathEffect(<span class="keyword">new</span> CornerPathEffect(<span class="number">100f</span>));</div><div class="line">        paintPaint.setStrokeJoin(Join.ROUND);</div><div class="line"></div><div class="line">        eraserPaint = <span class="keyword">new</span> Paint();</div><div class="line">        eraserPaint.setStyle(Style.STROKE);</div><div class="line">        eraserPaint.setAlpha(<span class="number">0</span>);</div><div class="line">        eraserPaint.setXfermode(<span class="keyword">new</span> PorterDuffXfermode(Mode.CLEAR));</div><div class="line">        eraserPaint.setColor(Color.TRANSPARENT);</div><div class="line">        eraserPaint.setStrokeWidth(eraserWidth * eraserWidthProgress / <span class="number">100</span>);</div><div class="line">        eraserPaint.setStrokeCap(Cap.ROUND);</div><div class="line">        eraserPaint.setPathEffect(<span class="keyword">new</span> CornerPathEffect(<span class="number">100f</span>));</div><div class="line">        eraserPaint.setStrokeJoin(Join.ROUND);</div><div class="line"></div><div class="line">        linePath = <span class="keyword">new</span> Path();</div><div class="line">        fillPath = <span class="keyword">new</span> Path();</div><div class="line"></div><div class="line">        mCanvas = <span class="keyword">new</span> Canvas();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSizeChanged</span><span class="params">(<span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> oldw, <span class="keyword">int</span> oldh)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class="line">        viewWidth = w;</div><div class="line">        viewHeight = h;</div><div class="line">        blankBitmap();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (event.getAction()) &#123;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</div><div class="line">                downX = event.getX();</div><div class="line">                downY = event.getY();</div><div class="line">                linePath = <span class="keyword">new</span> Path();</div><div class="line">                linePath.moveTo(downX, downY);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</div><div class="line">                downX = event.getX();</div><div class="line">                downY = event.getY();</div><div class="line">                <span class="keyword">switch</span> (drawStyle) &#123;</div><div class="line">                    <span class="keyword">case</span> DRAW_LINE:</div><div class="line">                        linePath.lineTo(downX, downY);</div><div class="line">                        mCanvas.drawPath(linePath, linePaint);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> DRAW_PAINT:</div><div class="line">                        linePath.lineTo(downX, downY);</div><div class="line">                        mCanvas.drawPath(linePath, paintPaint);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> DRAW_ERASER:</div><div class="line">                        linePath.lineTo(downX, downY);</div><div class="line">                        mCanvas.drawPath(linePath, eraserPaint);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                invalidate();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP:</div><div class="line">                <span class="keyword">switch</span> (drawStyle) &#123;</div><div class="line">                    <span class="keyword">case</span> DRAW_LINE:</div><div class="line">                        pathlist.add(<span class="keyword">new</span> PathBean(linePath, linePaint, lineWidthProgress * lineWidth / <span class="number">100</span>, lineColor));</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> DRAW_PAINT:</div><div class="line">                        pathlist.add(<span class="keyword">new</span> PathBean(linePath, paintPaint, paintWidthProgress * paintWidth / <span class="number">100</span>, paintColor));</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> DRAW_ERASER:</div><div class="line">                        pathlist.add(<span class="keyword">new</span> PathBean(linePath, eraserPaint, eraserWidthProgress * eraserWidth / <span class="number">100</span>, Color.TRANSPARENT));</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                deletePathList.clear();</div><div class="line"></div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onDraw(canvas);</div><div class="line">        canvas.drawBitmap(mBitmap, <span class="keyword">new</span> Matrix(), <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">blankBitmap</span><span class="params">()</span> </span>&#123;</div><div class="line">        mBitmap = Bitmap.createBitmap(viewWidth, viewHeight, Config.ARGB_8888);</div><div class="line">        mCanvas.setBitmap(mBitmap);</div><div class="line"><span class="comment">//        mCanvas.drawColor(Color.WHITE);</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</div><div class="line">        pathlist.clear();</div><div class="line">        deletePathList.clear();</div><div class="line">        blankBitmap();</div><div class="line">        invalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reset</span><span class="params">()</span> </span>&#123;</div><div class="line">        blankBitmap();</div><div class="line">        <span class="keyword">if</span> (pathlist.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">            PathBean pathBean = pathlist.get(pathlist.size() - <span class="number">1</span>);</div><div class="line">            pathlist.remove(pathBean);</div><div class="line">            deletePathList.add(pathBean);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pathlist.size(); i++) &#123;</div><div class="line">            pathlist.get(i).paint.setStrokeWidth(pathlist.get(i).width);</div><div class="line">            pathlist.get(i).paint.setColor(pathlist.get(i).color);</div><div class="line">            mCanvas.drawPath(pathlist.get(i).path, pathlist.get(i).paint);</div><div class="line">        &#125;</div><div class="line">        invalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">forward</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (deletePathList.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">            PathBean pathBean = deletePathList.get(deletePathList.size() - <span class="number">1</span>);</div><div class="line">            pathBean.paint.setStrokeWidth(pathBean.width);</div><div class="line">            pathBean.paint.setColor(pathBean.color);</div><div class="line">            mCanvas.drawPath(pathBean.path, pathBean.paint);</div><div class="line">            deletePathList.remove(deletePathList.size() - <span class="number">1</span>);</div><div class="line">            pathlist.add(pathBean);</div><div class="line">        &#125;</div><div class="line">        invalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDrawLine</span><span class="params">()</span> </span>&#123;</div><div class="line">        drawStyle = DRAW_LINE;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDrawPaint</span><span class="params">()</span> </span>&#123;</div><div class="line">        drawStyle = DRAW_PAINT;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEraser</span><span class="params">()</span> </span>&#123;</div><div class="line">        drawStyle = DRAW_ERASER;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getlineColor</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> lineColor;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (ContextCompat.checkSelfPermission(getContext(),</div><div class="line">                Manifest.permission.WRITE_EXTERNAL_STORAGE)</div><div class="line">                == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">            <span class="comment">//拥有读写文件权限</span></div><div class="line">            Log.i(TAG,<span class="string">"拥有读写文件权限"</span>);</div><div class="line">            <span class="comment">//获得系统当前时间，并以该时间作为文件名</span></div><div class="line">            SimpleDateFormat formatter = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMddHHmmss"</span>);</div><div class="line">            Date curDate = <span class="keyword">new</span> Date(System.currentTimeMillis());<span class="comment">//获取当前时间</span></div><div class="line">            String dir = Environment.getExternalStorageDirectory().getAbsolutePath();</div><div class="line">            String str = formatter.format(curDate) + <span class="string">"paint.png"</span>;</div><div class="line">            File file = <span class="keyword">new</span> File(dir + <span class="string">"/"</span>+str);</div><div class="line">            FileOutputStream fos = <span class="keyword">null</span>;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                fos = <span class="keyword">new</span> FileOutputStream(file);</div><div class="line">                Toast.makeText(getContext(), <span class="string">"保存成功"</span>, Toast.LENGTH_LONG).show();</div><div class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">            mBitmap.compress(CompressFormat.PNG, <span class="number">100</span>, fos);</div><div class="line">            getContext().sendBroadcast(<span class="keyword">new</span> Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse(<span class="string">"file://"</span> + Environment.getExternalStorageDirectory())));</div><div class="line">            Toast.makeText(getContext(), <span class="string">"保存成功"</span>, Toast.LENGTH_LONG).show();</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            Log.i(TAG,<span class="string">"没有读写权限"</span>);</div><div class="line"></div><div class="line">            Toast.makeText(getContext(), <span class="string">"没有读写权限"</span>, Toast.LENGTH_LONG).show();</div><div class="line">            <span class="comment">//没有读写权限</span></div><div class="line">            <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale((Activity) getContext(),</div><div class="line">                    Manifest.permission.WRITE_EXTERNAL_STORAGE))&#123;</div><div class="line">                ActivityCompat.requestPermissions((Activity) getContext(),</div><div class="line">                        <span class="keyword">new</span> String[]&#123;Manifest.permission.WRITE_EXTERNAL_STORAGE&#125;,</div><div class="line">                        <span class="number">140</span>);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line"><span class="comment">//                showPermissionDialog();</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="在activity中添加逻辑操作"><a class="header-anchor" href="#在activity中添加逻辑操作">¶</a>在Activity中添加逻辑操作</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> DrawSomethingView myView;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        myView = (DrawSomethingView) findViewById(R.id.myView);</div><div class="line"></div><div class="line">        findViewById(R.id.tvLine).setOnLongClickListener(<span class="keyword">new</span> OnLongClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onLongClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                SheetUtil sheetUtil = SheetUtil.getInstance();</div><div class="line">                <span class="keyword">int</span> color = myView.getlineColor();</div><div class="line">                <span class="keyword">float</span> progress = myView.getLineWidthProgress();</div><div class="line">                sheetUtil.addSheet(MainActivity.<span class="keyword">this</span>, color, progress);</div><div class="line">                sheetUtil.showSheet();</div><div class="line">                sheetUtil.setSeekBarChangeListener(<span class="keyword">new</span> SeekBarChangeListener() &#123;</div><div class="line">                    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgress</span><span class="params">(<span class="keyword">float</span> progress)</span> </span>&#123;</div><div class="line">                        myView.setLineWidthProgress(progress);</div><div class="line">                        myView.setLineWidth();</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onColorChange</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</div><div class="line">                        myView.setLineColor(color);</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        findViewById(R.id.tvPaint).setOnLongClickListener(<span class="keyword">new</span> OnLongClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onLongClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                SheetUtil sheetUtil = SheetUtil.getInstance();</div><div class="line">                <span class="keyword">int</span> color = myView.getPaintColor();</div><div class="line">                <span class="keyword">float</span> progress = myView.getPaintWidthProgress();</div><div class="line">                sheetUtil.addSheet(MainActivity.<span class="keyword">this</span>, color, progress);</div><div class="line">                sheetUtil.showSheet();</div><div class="line">                sheetUtil.setSeekBarChangeListener(<span class="keyword">new</span> SeekBarChangeListener() &#123;</div><div class="line">                    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgress</span><span class="params">(<span class="keyword">float</span> progress)</span> </span>&#123;</div><div class="line">                        myView.setPaintWidthProgress(progress);</div><div class="line">                        myView.setPaintWidth();</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onColorChange</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</div><div class="line">                        myView.setPaintColor(color);</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        findViewById(R.id.tvEraser).setOnLongClickListener(<span class="keyword">new</span> OnLongClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onLongClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                <span class="keyword">float</span> progress = myView.getEraserWidthProgress();</div><div class="line">                SheetUtil sheetUtil = SheetUtil.getInstance();</div><div class="line">                sheetUtil.addSheet(MainActivity.<span class="keyword">this</span>,-<span class="number">1</span>, progress);</div><div class="line">                sheetUtil.showSheet();</div><div class="line">                sheetUtil.setSeekBarChangeListener(<span class="keyword">new</span> SeekBarChangeListener() &#123;</div><div class="line">                    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgress</span><span class="params">(<span class="keyword">float</span> progress)</span> </span>&#123;</div><div class="line">                        myView.setEraserWidthProgress(progress);</div><div class="line">                        myView.setEraserWidth();</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onColorChange</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        findViewById(R.id.tvLine).setSelected(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        myView.clear();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reset</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        myView.reset();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">forward</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        myView.forward();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawLine</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        clearSelect();</div><div class="line">        findViewById(R.id.tvLine).setSelected(<span class="keyword">true</span>);</div><div class="line">        myView.setDrawLine();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawPaint</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        clearSelect();</div><div class="line">        findViewById(R.id.tvPaint).setSelected(<span class="keyword">true</span>);</div><div class="line">        myView.setDrawPaint();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eraser</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        clearSelect();</div><div class="line">        findViewById(R.id.tvEraser).setSelected(<span class="keyword">true</span>);</div><div class="line">        myView.setEraser();</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">clearSelect</span><span class="params">()</span> </span>&#123;</div><div class="line">        findViewById(R.id.tvEraser).setSelected(<span class="keyword">false</span>);</div><div class="line">        findViewById(R.id.tvLine).setSelected(<span class="keyword">false</span>);</div><div class="line">        findViewById(R.id.tvPaint).setSelected(<span class="keyword">false</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        myView.save();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="activity对应布局文件"><a class="header-anchor" href="#activity对应布局文件">¶</a>Activity对应布局文件</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div></pre></td><td class="code"><pre><div class="line">activity_main.xml</div><div class="line"></div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!--&lt;ImageView--&gt;</span></div><div class="line">    <span class="comment">&lt;!--android:layout_width="match_parent"--&gt;</span></div><div class="line">    <span class="comment">&lt;!--android:src="@drawable/timg"--&gt;</span></div><div class="line">    <span class="comment">&lt;!--android:scaleType="fitXY"--&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--android:layout_height="match_parent"/&gt;--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/ll"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_alignParentLeft</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_alignParentStart</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_alignParentTop</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tvClear"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/tv_bg"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:onClick</span>=<span class="string">"clear"</span></div><div class="line">            <span class="attr">android:paddingLeft</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:paddingRight</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"清除"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tvReset"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/tv_bg_2"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:onClick</span>=<span class="string">"reset"</span></div><div class="line">            <span class="attr">android:paddingLeft</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:paddingRight</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"撤销"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/tv_bg_3"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:onClick</span>=<span class="string">"forward"</span></div><div class="line">            <span class="attr">android:paddingLeft</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:paddingRight</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"前进"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tvLine"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/tv_bg_4"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:onClick</span>=<span class="string">"drawLine"</span></div><div class="line">            <span class="attr">android:paddingLeft</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:paddingRight</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"线条"</span>/&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tvPaint"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/tv_bg_4"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:onClick</span>=<span class="string">"drawPaint"</span></div><div class="line">            <span class="attr">android:paddingLeft</span>=<span class="string">"5dp"</span></div><div class="line">            <span class="attr">android:paddingRight</span>=<span class="string">"5dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"画笔"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tvEraser"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/tv_bg_4"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:onClick</span>=<span class="string">"eraser"</span></div><div class="line">            <span class="attr">android:paddingLeft</span>=<span class="string">"5dp"</span></div><div class="line">            <span class="attr">android:paddingRight</span>=<span class="string">"5dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"橡皮擦"</span>/&gt;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tvSave"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/tv_bg_2"</span></div><div class="line">            <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:onClick</span>=<span class="string">"save"</span></div><div class="line">            <span class="attr">android:paddingLeft</span>=<span class="string">"5dp"</span></div><div class="line">            <span class="attr">android:paddingRight</span>=<span class="string">"5dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"保存"</span>/&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">studentsdemo.lieeber.com.lbview.views.DrawSomethingView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/myView"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line"></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/ll"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="相关资源文件"><a class="header-anchor" href="#相关资源文件">¶</a>相关资源文件</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">tv_bg.xml</div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@color/colorPrimary"</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@color/colorAccent"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></div><div class="line"></div><div class="line">tv_bg2.xml</div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@color/colorPrimary"</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@color/color1"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></div><div class="line"></div><div class="line">tv_bg3.xml</div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@color/colorPrimary"</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@color/color2"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></div><div class="line"></div><div class="line">tv_bg4.xml</div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">item</span>  <span class="attr">android:state_selected</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"3dp"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:color</span>=<span class="string">"@color/colorAccent"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">"1dp"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"6dp"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:color</span>=<span class="string">"#ffffffff"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">"3dp"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="自定义弹框"><a class="header-anchor" href="#自定义弹框">¶</a>自定义弹框</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SheetUtil</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> ViewGroup contentView;</div><div class="line">    <span class="keyword">private</span> View sheetContent;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SheetUtil sheetUtil = <span class="keyword">new</span> SheetUtil();</div><div class="line">    <span class="keyword">private</span> Activity activity;</div><div class="line">    <span class="keyword">private</span> View llSheet;</div><div class="line">    <span class="keyword">private</span> View viewSheetBg;</div><div class="line">    <span class="keyword">private</span> ColorPickerView colorPickerView;</div><div class="line">    <span class="keyword">private</span> View colorView;</div><div class="line">    <span class="keyword">private</span> SeekBar seekBar;</div><div class="line">    <span class="keyword">private</span> TextView tvProgress;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SheetUtil <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> sheetUtil;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addSheet</span><span class="params">(Activity activity, <span class="keyword">int</span> originColor, <span class="keyword">float</span> originProgress)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.activity = activity;</div><div class="line">        contentView = (ViewGroup) activity.findViewById(android.R.id.content);</div><div class="line">        sheetContent = LayoutInflater.from(activity).inflate(R.layout.setting_dialog, contentView, <span class="keyword">false</span>);</div><div class="line">        sheetContent.setVisibility(View.GONE);</div><div class="line">        <span class="keyword">if</span> (contentView.findViewById(R.id.view_sheet_bg) == <span class="keyword">null</span>) &#123;</div><div class="line">            contentView.addView(sheetContent);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        viewSheetBg = sheetContent.findViewById(R.id.view_sheet_bg);</div><div class="line">        llSheet = sheetContent.findViewById(R.id.ll_sheet);</div><div class="line">        colorPickerView = (ColorPickerView) sheetContent.findViewById(R.id.color_picker);</div><div class="line">        colorView = sheetContent.findViewById(R.id.colorView);</div><div class="line">        seekBar = (SeekBar) sheetContent.findViewById(R.id.seek_bar);</div><div class="line">        tvProgress = (TextView) sheetContent.findViewById(R.id.tv_progress);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">if</span> (originColor == -<span class="number">1</span>) &#123;</div><div class="line">            sheetContent.findViewById(R.id.rl_color_picker).setVisibility(View.GONE);</div><div class="line">        &#125;</div><div class="line">        seekBar.setProgress((<span class="keyword">int</span>) originProgress);</div><div class="line">        tvProgress.setText((<span class="keyword">int</span>) originProgress + <span class="string">"%"</span>);</div><div class="line">        colorView.setBackgroundColor(originColor);</div><div class="line">        colorPickerView.setOnSeekColorListener(<span class="keyword">new</span> OnSeekColorListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSeekColorListener</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</div><div class="line">                colorView.setBackgroundColor(color);</div><div class="line">                <span class="keyword">if</span> (seekBarChangeListener != <span class="keyword">null</span>) &#123;</div><div class="line">                    seekBarChangeListener.onColorChange(color);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        viewSheetBg.setOnClickListener(<span class="keyword">new</span> OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                disMissSheet();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        seekBar.setOnSeekBarChangeListener(<span class="keyword">new</span> OnSeekBarChangeListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgressChanged</span><span class="params">(SeekBar seekBar, <span class="keyword">int</span> progress, <span class="keyword">boolean</span> fromUser)</span> </span>&#123;</div><div class="line">                System.out.println(progress);</div><div class="line">                <span class="keyword">if</span> (seekBarChangeListener != <span class="keyword">null</span>) &#123;</div><div class="line">                    seekBarChangeListener.onProgress(progress);</div><div class="line">                &#125;</div><div class="line">                tvProgress.setText(progress + <span class="string">"%"</span>);</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartTrackingTouch</span><span class="params">(SeekBar seekBar)</span> </span>&#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStopTrackingTouch</span><span class="params">(SeekBar seekBar)</span> </span>&#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showSheet</span><span class="params">()</span> </span>&#123;</div><div class="line">        sheetContent.setVisibility(View.VISIBLE);</div><div class="line">        sheetContent.bringToFront();</div><div class="line"></div><div class="line">        llSheet.setTranslationY(activity.getResources().getDisplayMetrics().heightPixels);</div><div class="line">        ValueAnimator alphaAnimator = ValueAnimator.ofFloat(<span class="number">0</span>, <span class="number">1</span>);</div><div class="line">        alphaAnimator.setInterpolator(<span class="keyword">new</span> DecelerateInterpolator());</div><div class="line">        alphaAnimator.setDuration(<span class="number">300</span>);</div><div class="line">        alphaAnimator.addUpdateListener(<span class="keyword">new</span> AnimatorUpdateListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</div><div class="line">                <span class="keyword">float</span> alpha = (<span class="keyword">float</span>) animation.getAnimatedValue();</div><div class="line">                viewSheetBg.setAlpha(alpha);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        alphaAnimator.start();</div><div class="line">        ValueAnimator translationAniamtor = ValueAnimator.ofFloat(activity.getResources().getDisplayMetrics().heightPixels, <span class="number">0</span>);</div><div class="line">        translationAniamtor.setInterpolator(<span class="keyword">new</span> DecelerateInterpolator());</div><div class="line">        translationAniamtor.setDuration(<span class="number">300</span>);</div><div class="line">        translationAniamtor.addUpdateListener(<span class="keyword">new</span> AnimatorUpdateListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</div><div class="line">                <span class="keyword">float</span> translationY = (<span class="keyword">float</span>) animation.getAnimatedValue();</div><div class="line">                llSheet.setTranslationY(translationY);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        translationAniamtor.start();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">disMissSheet</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (viewSheetBg != <span class="keyword">null</span> &amp;&amp; llSheet != <span class="keyword">null</span>) &#123;</div><div class="line">            disMissSheet(viewSheetBg, llSheet);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">disMissSheet</span><span class="params">(<span class="keyword">final</span> View viewSheetBg, <span class="keyword">final</span> View llSheet)</span> </span>&#123;</div><div class="line">        ValueAnimator alphaAnimator = ValueAnimator.ofFloat(<span class="number">1</span>, <span class="number">0</span>);</div><div class="line">        alphaAnimator.setInterpolator(<span class="keyword">new</span> DecelerateInterpolator());</div><div class="line">        alphaAnimator.setDuration(<span class="number">300</span>);</div><div class="line">        alphaAnimator.addUpdateListener(<span class="keyword">new</span> AnimatorUpdateListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</div><div class="line">                <span class="keyword">float</span> alpha = (<span class="keyword">float</span>) animation.getAnimatedValue();</div><div class="line">                viewSheetBg.setAlpha(alpha);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        alphaAnimator.start();</div><div class="line"></div><div class="line">        ValueAnimator translationAniamtor = ValueAnimator.ofFloat(<span class="number">0</span>, activity.getResources().getDisplayMetrics().heightPixels);</div><div class="line">        translationAniamtor.setInterpolator(<span class="keyword">new</span> DecelerateInterpolator());</div><div class="line">        translationAniamtor.setDuration(<span class="number">300</span>);</div><div class="line">        translationAniamtor.addUpdateListener(<span class="keyword">new</span> AnimatorUpdateListener() &#123;</div><div class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</div><div class="line">                <span class="keyword">float</span> translationY = (<span class="keyword">float</span>) animation.getAnimatedValue();</div><div class="line">                llSheet.setTranslationY(translationY);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        translationAniamtor.start();</div><div class="line">        translationAniamtor.addListener(<span class="keyword">new</span> AnimatorListenerAdapter() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationEnd</span><span class="params">(Animator animation)</span> </span>&#123;</div><div class="line">                contentView.removeView(sheetContent);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isShowingSheet</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (contentView == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (contentView.findViewById(R.id.view_sheet_bg) == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SeekBarChangeListener</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onProgress</span><span class="params">(<span class="keyword">float</span> progress)</span></span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onColorChange</span><span class="params">(<span class="keyword">int</span> color)</span></span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> SeekBarChangeListener seekBarChangeListener;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSeekBarChangeListener</span><span class="params">(SeekBarChangeListener seekBarChangeListener)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.seekBarChangeListener = seekBarChangeListener;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="自定义弹框对应布局"><a class="header-anchor" href="#自定义弹框对应布局">¶</a>自定义弹框对应布局</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">setting_dialog.xml</div><div class="line"></div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/view_sheet_bg"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#88000000"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/ll_sheet"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"300dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#ffffff"</span></div><div class="line">        <span class="attr">android:clickable</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">        <span class="attr">android:padding</span>=<span class="string">"20dp"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"粗细"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">SeekBar</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/seek_bar"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"10dp"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/tv_progress"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"5dp"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"50%"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/rl_color_picker"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_marginTop</span>=<span class="string">"20dp"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">studentsdemo.lieeber.com.lbview.views.ColorPickerView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/color_picker"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"150dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"150dp"</span></div><div class="line">                <span class="attr">android:layout_alignParentLeft</span>=<span class="string">"true"</span>/&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">View</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/colorView"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"20dp"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"20dp"</span></div><div class="line">                <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"40dp"</span></div><div class="line">                <span class="attr">android:layout_toRightOf</span>=<span class="string">"@+id/color_picker"</span></div><div class="line">                <span class="attr">android:background</span>=<span class="string">"#ff0000"</span>/&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="自定义画笔颜色更改器"><a class="header-anchor" href="#自定义画笔颜色更改器">¶</a>自定义画笔颜色更改器</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by lieeber on 2017/6/28.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorPickerView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Context context;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Currently selected color</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span>[] colorHSV = <span class="keyword">new</span> <span class="keyword">float</span>[]&#123;<span class="number">0f</span>, <span class="number">1f</span>, <span class="number">1f</span>&#125;;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Paint colorWheelPaint;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Paint touchCirclePaint;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> radius;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> centerX;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> centerY;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> touchCircleX;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> touchCircleY;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> OnSeekColorListener onSeekColorListener;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ColorPickerView</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ColorPickerView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ColorPickerView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">        init(context);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        setLayerType(LAYER_TYPE_SOFTWARE, <span class="keyword">null</span>);</div><div class="line">        <span class="keyword">this</span>.context = context;</div><div class="line">        colorWheelPaint = <span class="keyword">new</span> Paint();</div><div class="line">        colorWheelPaint.setAntiAlias(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">        touchCirclePaint = <span class="keyword">new</span> Paint();</div><div class="line">        touchCirclePaint.setStyle(Paint.Style.STROKE);</div><div class="line">        touchCirclePaint.setColor(Color.WHITE);</div><div class="line">        touchCirclePaint.setAntiAlias(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class="line"></div><div class="line">        <span class="keyword">int</span> widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class="line">        <span class="keyword">int</span> heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);</div><div class="line"></div><div class="line">        <span class="keyword">int</span> widthSpecSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class="line">        <span class="keyword">int</span> heightSpecSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class="line"></div><div class="line">        <span class="comment">//处理 wrap_content问题</span></div><div class="line">        <span class="keyword">int</span> defaultDimension = dip2px(<span class="number">200</span>);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (widthSpecMode == MeasureSpec.AT_MOST &amp;&amp; heightSpecMode == MeasureSpec.AT_MOST) &#123;</div><div class="line">            setMeasuredDimension(defaultDimension, defaultDimension);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (widthSpecMode == MeasureSpec.AT_MOST) &#123;</div><div class="line">            setMeasuredDimension(defaultDimension, heightSpecSize);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (heightSpecMode == MeasureSpec.AT_MOST) &#123;</div><div class="line">            setMeasuredDimension(widthSpecSize, defaultDimension);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSizeChanged</span><span class="params">(<span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> oldw, <span class="keyword">int</span> oldh)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class="line">        centerX = w / <span class="number">2</span>;</div><div class="line">        centerY = h / <span class="number">2</span>;</div><div class="line">        radius = Math.min(centerX, centerY);</div><div class="line">        createColorWheel();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onDraw(canvas);</div><div class="line">        canvas.drawCircle(centerX, centerY, radius, colorWheelPaint);</div><div class="line">        canvas.drawCircle(touchCircleX, touchCircleY, <span class="number">10</span>, touchCirclePaint);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * create color wheel</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">createColorWheel</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> colorCount = <span class="number">30</span>;</div><div class="line">        <span class="keyword">float</span> colorAngleStep = <span class="number">360</span> / <span class="number">30.0f</span>;</div><div class="line">        <span class="keyword">int</span> colors[] = <span class="keyword">new</span> <span class="keyword">int</span>[colorCount];</div><div class="line">        <span class="keyword">float</span> hsv[] = <span class="keyword">new</span> <span class="keyword">float</span>[]&#123;<span class="number">0f</span>, <span class="number">1f</span>, <span class="number">1f</span>&#125;;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; colors.length; i++) &#123;</div><div class="line">            hsv[<span class="number">0</span>] = (i * colorAngleStep + <span class="number">180</span>) % <span class="number">360</span>;</div><div class="line">            colors[i] = Color.HSVToColor(hsv);</div><div class="line">        &#125;</div><div class="line">        SweepGradient sweepGradient = <span class="keyword">new</span> SweepGradient(centerX, centerY, colors, <span class="keyword">null</span>);</div><div class="line">        RadialGradient radialGradient = <span class="keyword">new</span> RadialGradient(centerX, centerY,</div><div class="line">                radius, <span class="number">0xFFFFFFFF</span>, <span class="number">0x00FFFFFF</span>, Shader.TileMode.CLAMP);</div><div class="line">        ComposeShader composeShader = <span class="keyword">new</span> ComposeShader(sweepGradient, radialGradient, PorterDuff.Mode.SRC_OVER);</div><div class="line">        colorWheelPaint.setShader(composeShader);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</div><div class="line">        ViewParent parent = getParent();</div><div class="line">        <span class="keyword">if</span> (parent != <span class="keyword">null</span>)</div><div class="line">            parent.requestDisallowInterceptTouchEvent(<span class="keyword">true</span>);</div><div class="line">        <span class="keyword">switch</span> (event.getAction()) &#123;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</div><div class="line">                <span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</div><div class="line">                <span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</div><div class="line">                <span class="keyword">int</span> cx = x - centerX;</div><div class="line">                <span class="keyword">int</span> cy = y - centerY;</div><div class="line">                <span class="keyword">double</span> d = Math.sqrt(cx * cx + cy * cy);</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (d &lt;= radius) &#123;</div><div class="line">                    colorHSV[<span class="number">0</span>] = (<span class="keyword">float</span>) (Math.toDegrees(Math.atan2(cy, cx)) + <span class="number">180f</span>);</div><div class="line">                    colorHSV[<span class="number">1</span>] = Math.max(<span class="number">0f</span>, Math.min(<span class="number">1f</span>, (<span class="keyword">float</span>) (d / radius)));</div><div class="line">                    <span class="keyword">if</span> (onSeekColorListener != <span class="keyword">null</span>) &#123;</div><div class="line">                        touchCircleY = y;</div><div class="line">                        touchCircleX = x;</div><div class="line">                        onSeekColorListener.onSeekColorListener(getColor());</div><div class="line">                        postInvalidate();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP:</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnSeekColorListener</span><span class="params">(OnSeekColorListener listener)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.onSeekColorListener = listener;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> color 0~360</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHSVColor</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</div><div class="line">        colorHSV[<span class="number">0</span>] = color;</div><div class="line">        colorWheelPaint.setColor(Color.HSVToColor(colorHSV));</div><div class="line">        postInvalidate();</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> value 0~1.0</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHSVValue</span><span class="params">(<span class="keyword">float</span> value)</span> </span>&#123;</div><div class="line">        colorHSV[<span class="number">2</span>] = value;</div><div class="line">        colorWheelPaint.setColor(Color.HSVToColor(colorHSV));</div><div class="line">        postInvalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> saturation 0~1.0</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHSVSaturation</span><span class="params">(<span class="keyword">float</span> saturation)</span> </span>&#123;</div><div class="line">        colorHSV[<span class="number">1</span>] = saturation;</div><div class="line">        colorWheelPaint.setColor(Color.HSVToColor(colorHSV));</div><div class="line">        postInvalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123;</div><div class="line">        Color.colorToHSV(color, colorHSV);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getColor</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> Color.HSVToColor(colorHSV);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> Parcelable <span class="title">onSaveInstanceState</span><span class="params">()</span> </span>&#123;</div><div class="line">        Bundle state = <span class="keyword">new</span> Bundle();</div><div class="line">        state.putFloatArray(<span class="string">"color"</span>, colorHSV);</div><div class="line">        state.putParcelable(<span class="string">"super"</span>, <span class="keyword">super</span>.onSaveInstanceState());</div><div class="line">        <span class="keyword">return</span> state;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestoreInstanceState</span><span class="params">(Parcelable state)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (state <span class="keyword">instanceof</span> Bundle) &#123;</div><div class="line">            Bundle bundle = (Bundle) state;</div><div class="line">            colorHSV = bundle.getFloatArray(<span class="string">"color"</span>);</div><div class="line">            <span class="keyword">super</span>.onRestoreInstanceState(bundle.getParcelable(<span class="string">"super"</span>));</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">super</span>.onRestoreInstanceState(state);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dip2px</span><span class="params">(<span class="keyword">float</span> dpValue)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">float</span> scale = context.getResources().getDisplayMetrics().density;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) (dpValue * scale + <span class="number">0.5f</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnSeekColorListener</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onSeekColorListener</span><span class="params">(<span class="keyword">int</span> color)</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;买了个ipad pro，发现用proCreate画画挺有意思，于是决定用Andorid实现一个自定义View画板效果。&lt;/p&gt;
    
    </summary>
    
      <category term="自定义控件" scheme="http://yoursite.com/categories/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6/"/>
    
    
      <category term="Android" scheme="http://yoursite.com/tags/Android/"/>
    
      <category term="自定义控件" scheme="http://yoursite.com/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>Hexo使用上的一些小tips</title>
    <link href="http://yoursite.com/2017/05/15/Hexo%E4%BD%BF%E7%94%A8%E4%B8%8A%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8Ftips/"/>
    <id>http://yoursite.com/2017/05/15/Hexo使用上的一些小tips/</id>
    <published>2017-05-15T04:39:04.000Z</published>
    <updated>2017-07-06T01:26:47.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="更换next主题的背景"><a class="header-anchor" href="#更换next主题的背景">¶</a>更换next主题的背景</h3>
<ol>
<li>将喜欢的背景图放到project–&gt;themes–&gt;next–&gt;source–&gt;images目录下。</li>
<li>打开project–&gt;themes–&gt;next–&gt;source–&gt;css–&gt;_custom–&gt;custom.styl文件，加入代码<br>
<code>body { background:url(/images/imagename.jpg);}</code></li>
<li>重新编译项目就OK了。</li>
</ol>
<a id="more"></a>
<h3 id="markdown语法中实现添加脚注功能"><a class="header-anchor" href="#markdown语法中实现添加脚注功能">¶</a>Markdown语法中实现添加脚注功能</h3>
<p>hexo默认的渲染组件，是不能实现添加脚注功能的，因此需要安装新的渲染组件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm un hexo-renderer-marked --save</div><div class="line">$ npm i hexo-renderer-markdown-it --save</div></pre></td></tr></table></figure>
<p>打开项目_config.yml文件，在文中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">markdown:</div><div class="line">  render:</div><div class="line">    html: true</div><div class="line">    xhtmlOut: false</div><div class="line">    breaks: false</div><div class="line">    linkify: true</div><div class="line">    typographer: true</div><div class="line">    quotes: &apos;“”‘’&apos;</div><div class="line">  plugins:</div><div class="line">    - markdown-it-footnote</div><div class="line">    - markdown-it-sup</div><div class="line">    - markdown-it-sub</div><div class="line">    - markdown-it-abbr</div><div class="line">  anchors:</div><div class="line">    level: 2</div><div class="line">    collisionSuffix: &apos;v&apos;</div><div class="line">    permalink: true</div><div class="line">    permalinkClass: header-anchor</div><div class="line">    permalinkSymbol: ¶</div></pre></td></tr></table></figure>
<p>重新编译后就可以使用脚注了。</p>
<p>测试发现，直接跑hexo server没有效果，需要发布后才能看到脚注的实现效果。</p>
<p>脚注的使用方法可以在<a href="http://www.lieeber.com/2017/01/22/markdown%E8%AF%AD%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8/" title="Markdown语法的使用" target="_blank" rel="external"><font color="#0099ff">Markdown语法的使用</font></a>中查看。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;更换next主题的背景&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#更换next主题的背景&quot;&gt;¶&lt;/a&gt;更换next主题的背景&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;将喜欢的背景图放到project–&amp;gt;themes–&amp;gt;next–&amp;gt;source–&amp;gt;images目录下。&lt;/li&gt;
&lt;li&gt;打开project–&amp;gt;themes–&amp;gt;next–&amp;gt;source–&amp;gt;css–&amp;gt;_custom–&amp;gt;custom.styl文件，加入代码&lt;br&gt;
&lt;code&gt;body { background:url(/images/imagename.jpg);}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;重新编译项目就OK了。&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="博客" scheme="http://yoursite.com/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="Markdown" scheme="http://yoursite.com/tags/Markdown/"/>
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Markdown语法的使用</title>
    <link href="http://yoursite.com/2017/01/22/Markdown%E8%AF%AD%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2017/01/22/Markdown语法的使用/</id>
    <published>2017-01-22T04:39:04.000Z</published>
    <updated>2017-07-05T10:55:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>MarkDown语法比较简单，能够很轻松的学会，但如果搭配html的语法使用，能够实现更多复杂的效果。</p>
<h3 id="标题"><a class="header-anchor" href="#标题">¶</a>标题</h3>
<p>在文字前面添加#即可实现标题效果
<code># 一级标题</code>
<code>## 二级标题</code>
<code>### 三级标题</code>
依此类推，总共可以创建六级标题</p>
<a id="more"></a>
<h3 id="引用文字"><a class="header-anchor" href="#引用文字">¶</a>引用文字</h3>
<p>在文字前添加&gt;</p>
<blockquote>
<p>这是一级引用</p>
<blockquote>
<p>这是二级引用</p>
<blockquote>
<p>这是三级引用</p>
</blockquote>
</blockquote>
</blockquote>
<p>语法：
<code>&gt; 这是一段引用。</code></p>
<h3 id="添加超连接"><a class="header-anchor" href="#添加超连接">¶</a>添加超连接</h3>
<p>这是一个跳转到博客首页的连接<a href="http://www.lieeber.com/" title="我的首页" target="_blank" rel="external"><font color="#0099ff">首页</font></a>
语法：<code>[首页](http://www.lieeber.com/ &quot;我的首页&quot;)</code></p>
<h3 id="添加图片"><a class="header-anchor" href="#添加图片">¶</a>添加图片</h3>
<img width="150" height="150" align="center" src="http://www.lieeber.com/images/lieeber.jpg">
<p>语法：</p>
<ol>
<li><code>![图片](https://mgpath/xxx.jpg)</code></li>
<li><code>&lt;img width=&quot;150&quot; height=&quot;150&quot; align=center src=&quot;mgpath/xxx.jpg&quot;/&gt;</code></li>
</ol>
<p>第一种是使用的Markdown自带的添加语法，无法控制图片的大小和位置，第二种是html的语法，可以指定图片的大小和位置，不过对于Markdown语法，我们可以结合div来控制图片的位置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div align=center&gt;</div><div class="line">![图片](https://mgpath/xxx.jpg)</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<h3 id="分割线"><a class="header-anchor" href="#分割线">¶</a>分割线</h3>
<hr>
<p>语法：<code>***</code></p>
<h3 id="列表"><a class="header-anchor" href="#列表">¶</a>列表</h3>
<h4 id="无序列表"><a class="header-anchor" href="#无序列表">¶</a>无序列表</h4>
<ul>
<li>one</li>
<li>two</li>
<li>three</li>
</ul>
<p>语法：<code>在需要列表样式的文字前添加&quot;-&quot;或者&quot;*&quot;</code></p>
<h4 id="有序列表"><a class="header-anchor" href="#有序列表">¶</a>有序列表</h4>
<ol>
<li>one</li>
<li>two</li>
<li>three</li>
</ol>
<p>语法：<code>在需要列表样式的文字前添加&quot;1.&quot;，依次增加。</code></p>
<h3 id="粗体与斜体"><a class="header-anchor" href="#粗体与斜体">¶</a>粗体与斜体</h3>
<p><strong>这个是粗体</strong></p>
<p><em>这个是斜体</em></p>
<p>语法：
<code>**这个是粗体**</code>
<code>*这个是斜体*</code></p>
<h3 id="表格"><a class="header-anchor" href="#表格">¶</a>表格</h3>
<table>
<thead>
<tr>
<th>书籍</th>
<th style="text-align:right">价格</th>
<th style="text-align:center">作者</th>
</tr>
</thead>
<tbody>
<tr>
<td>金瓶梅</td>
<td style="text-align:right">￥30</td>
<td style="text-align:center">小明</td>
</tr>
<tr>
<td>西厢记</td>
<td style="text-align:right">￥49</td>
<td style="text-align:center">小华</td>
</tr>
<tr>
<td>计算机原理</td>
<td style="text-align:right">￥50</td>
<td style="text-align:center">韩梅梅</td>
</tr>
</tbody>
</table>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">| 书籍         | 价格   |  作者    |</div><div class="line">| ---------   | -----: | :----:  |</div><div class="line">| 金瓶梅       | \￥30  |   小明   |</div><div class="line">| 西厢记       | \￥49  |   小华   |</div><div class="line">| 计算机原理    | \￥50  |  韩梅梅  |</div><div class="line"></div><div class="line">* ------:为右对齐。 </div><div class="line">* :------为左对齐。 </div><div class="line">* :------:为居中对齐。 </div><div class="line">* -------为使用默认居中对齐</div></pre></td></tr></table></figure>
<h3 id="阅读全文"><a class="header-anchor" href="#阅读全文">¶</a>阅读全文</h3>
<p><code>&lt;!-- more --&gt;</code></p>
<h3 id="代码块："><a class="header-anchor" href="#代码块：">¶</a>代码块：</h3>
<h4 id="单行代码块："><a class="header-anchor" href="#单行代码块：">¶</a>单行代码块：</h4>
<p><code>public static void main(String args)</code>
语法：在代码块左右分别添加一个´</p>
<h4 id="多行代码块"><a class="header-anchor" href="#多行代码块">¶</a>多行代码块</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public static void main(String ..args)&#123;</div><div class="line">    System.out.println(&quot;hello Markdown!&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>语法：在代码块左右分别添加三个´</p>
<h3 id="删除线"><a class="header-anchor" href="#删除线">¶</a>删除线</h3>
<p><s>这是一条被删除文本</s>
语法：<code>~~这是一条被删除文本~~</code></p>
<h3 id="脚注"><a class="header-anchor" href="#脚注">¶</a>脚注</h3>
<p>这是一个脚注<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>。
语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">这是一个脚注[^1]。</div><div class="line">脚注须使用数字，然后再文章末尾加上&quot;[^1]: 脚注内容&quot;即可</div></pre></td></tr></table></figure>
<h3 id="实现页面内跳转"><a class="header-anchor" href="#实现页面内跳转">¶</a>实现页面内跳转</h3>
<p><a href="#index">锚点</a>
<br>
<span id="index">跳转到这里</span><br>
语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[锚点](#index)</div><div class="line">&lt;span id = &quot;index&quot;&gt;跳转到这里&lt;/span&gt;</div></pre></td></tr></table></figure>
<h3 id="配合html-css使用"><a class="header-anchor" href="#配合html-css使用">¶</a>配合html,css使用</h3>
<h4 id="设置字体颜色-样式-大小等"><a class="header-anchor" href="#设置字体颜色-样式-大小等">¶</a>设置字体颜色，样式，大小等</h4>
<p><font face="黑体">我是黑体字</font><br>
<font face="微软雅黑">我是微软雅黑</font><br>
<font face="STCAIYUN">我是华文彩云</font><br>
<font color="#0099ff" size="5" face="黑体">color=#0099ff size=72 face=&quot;黑体&quot;</font><br>
<font color="#00ffff" size="4">color=#00ffff</font><br>
<font color="gray" size="10">color=gray</font><br>
语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;font face=&quot;黑体&quot;&gt;我是黑体字&lt;/font&gt;&lt;/br&gt;</div><div class="line">&lt;font face=&quot;微软雅黑&quot;&gt;我是微软雅黑&lt;/font&gt;&lt;/br&gt;</div><div class="line">&lt;font face=&quot;STCAIYUN&quot;&gt;我是华文彩云&lt;/font&gt;&lt;/br&gt;</div><div class="line">&lt;font color=#0099ff size=5 face=&quot;黑体&quot;&gt;color=#0099ff size=72 face=&quot;黑体&quot;&lt;/font&gt;&lt;/br&gt;</div><div class="line">&lt;font color=#00ffff size=4&gt;color=#00ffff&lt;/font&gt;&lt;/br&gt;</div><div class="line">&lt;font color=gray size=10&gt;color=gray&lt;/font&gt;&lt;/br&gt;</div></pre></td></tr></table></figure>
<p>html样式可以和Markdown语法组合起来使用，比如可以指定超链接的颜色。<br>
这是一个跳转到博客首页的连接<a href="http://www.lieeber.com/" title="我的首页" target="_blank" rel="external"><font color="#0099ff">首页</font></a>
语法：<code>这是一个跳转到博客首页的连接[&lt;font color=#0099ff&gt;首页&lt;/font&gt;](http://www.lieeber.com/ &quot;我的首页&quot;)</code></p>
<h4 id="设置背景色"><a class="header-anchor" href="#设置背景色">¶</a>设置背景色</h4>
<table><tr><td bgcolor="orange">黄色背景：orange</td></tr></table>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>脚注内容 <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MarkDown语法比较简单，能够很轻松的学会，但如果搭配html的语法使用，能够实现更多复杂的效果。&lt;/p&gt;
&lt;h3 id=&quot;标题&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#标题&quot;&gt;¶&lt;/a&gt;标题&lt;/h3&gt;
&lt;p&gt;在文字前面添加#即可实现标题效果
&lt;code&gt;# 一级标题&lt;/code&gt;
&lt;code&gt;## 二级标题&lt;/code&gt;
&lt;code&gt;### 三级标题&lt;/code&gt;
依此类推，总共可以创建六级标题&lt;/p&gt;
    
    </summary>
    
      <category term="博客" scheme="http://yoursite.com/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="Markdown" scheme="http://yoursite.com/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>博客搭建完成，记录一下。</title>
    <link href="http://yoursite.com/2016/12/22/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%AE%8C%E6%88%90%EF%BC%8C%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%8B%E6%AD%A5%E9%AA%A4/"/>
    <id>http://yoursite.com/2016/12/22/博客搭建完成，记录一下步骤/</id>
    <published>2016-12-22T04:39:04.000Z</published>
    <updated>2017-07-05T10:37:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>  一直想搭建一个自己心仪的博客系统，把自己零散的知识系统给整理一下。可惜总是觉得网上的模板太丑而没有下手。学习过很多次自定义控件，学了又忘，忘了再学，遥遥无期。因此搭建一个博客，构建自己的知识体系，非常具有必要性。
  花了一天时间，使用hexo配上next主题，搭建了自己喜欢的博客。简单记录一下搭建的过程。</p>
<a id="more"></a>
<h2 id="环境配置"><a class="header-anchor" href="#环境配置">¶</a>环境配置</h2>
<blockquote>
<ul>
<li>安装node，直接去<a href="https://nodejs.org/en/" target="_blank" rel="external"><font color="#0099ff">node官网</font></a>官网下载安装即可，安装后就可以在终端使用npm命令了。</li>
<li>安装git。</li>
<li>在github上创建仓库：<a href="http://github.youtname.io" target="_blank" rel="external">github.youtname.io</a></li>
</ul>
</blockquote>
<h2 id="安装hexo"><a class="header-anchor" href="#安装hexo">¶</a>安装hexo</h2>
<p>在电脑上选择一个文件夹，打开终端进入到该文件夹目录下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g hexo </div><div class="line"> </div><div class="line">hexo init </div><div class="line"></div><div class="line">hexo generate</div><div class="line"></div><div class="line">hexo server</div></pre></td></tr></table></figure>
<p>通过以上步骤，在本地已经启动了一个博客服务了，在浏览器中输入<a href="localhost:4000" target="_blank" rel="external"><font color="#0099ff">localhost:4000</font></a>即可看到</p>
<h2 id="将博客发布到github"><a class="header-anchor" href="#将博客发布到github">¶</a>将博客发布到github</h2>
<p>打开初始化hexo的目录，打开文件_config.yml，在文件底部加入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repo: https://github.com/yourname/yourname.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure>
<p>然后再终端输入命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo generate</div><div class="line"></div><div class="line">hexo deploy</div></pre></td></tr></table></figure>
<p>代码就会自动帮你push到你的github中的yournname.github.io工程下面，通过网址yourname.github.io就可以顺利访问了。</p>
<h2 id="主题更换"><a class="header-anchor" href="#主题更换">¶</a>主题更换</h2>
<p>hexo默认使用主题landscape，需要替换成next主题，通过<a href="http://theme-next.iissnan.com/" target="_blank" rel="external"><font color="#0099ff">next官网</font></a>提供的操作步骤，即可进行主题替换。</p>
<h2 id="跨pc操作"><a class="header-anchor" href="#跨pc操作">¶</a>跨PC操作</h2>
<p>建议把初始化hexo博客文件夹下的代码上传到github，当需要去其他pc上操作博客的时候，拉取代码，使用hexo的命令进行编译即可。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  一直想搭建一个自己心仪的博客系统，把自己零散的知识系统给整理一下。可惜总是觉得网上的模板太丑而没有下手。学习过很多次自定义控件，学了又忘，忘了再学，遥遥无期。因此搭建一个博客，构建自己的知识体系，非常具有必要性。
  花了一天时间，使用hexo配上next主题，搭建了自己喜欢的博客。简单记录一下搭建的过程。&lt;/p&gt;
    
    </summary>
    
      <category term="博客" scheme="http://yoursite.com/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
  </entry>
  
</feed>
