---
title: 进程的基本概念
tags:
  - 进程
categories:
  - 操作系统
date: 2017-04-10 15:21:22
---
### 程序的顺序执行及其特征
1. 概念：把一个应用程序分成若干个程序段，在各程序段之间，必须按照某种先后次序顺序执行，仅当前一操作(程序段)执行完后，才能执行后继操作。
2. 顺序性：处理机的操作严格按照程序所规定的顺序执行，即每一操作必须在上一个操作结束之后开始。
3. 封闭性：程序是在封闭的环境下执行的，即程序运行时独占全机资源，资源的状态（除初始状态外）只有本程序才能改变它。程序一旦开始执行，其执行结果不受外界因素影响。
4. 可再现性：只要程序执行时的环境和初始条件相同，当程序重复执行时，不论它是从头到尾不停顿地执行，还是“停停走走”地执行，都将获得相同的结果。

<!-- more -->

### 前趋图
1. 在前趋图中，把没有前趋的结点称为初始结点(Initial Node)，把没有后继的结点称为终止结点(Final Node)。此外，每个结点还具有一个重量(Weight)，用于表示该结点所含有的程序量或结点的执行时间。
2. 前趋图中必须不存在循环。
很多语言都采用的这种方式来判断一个对象是否已经"死去"，比如Object-C，给对象添加一个引用计数器，每当有一个地方引用它时，计数器就加1，当引用失效时，计数器就减1；任何时刻计数器为0的对象就是不可能再被使用的。

### 程序的并发执行及其特征
1. 间断性：程序在并发执行时，由于它们共享系统资源，以及为完成同一项任务而相互合作，致使在这些并发执行的程序之间，形成了相互制约的关系。互制约将导致并发程序具有“执行—暂停—执行”这种间断性的活动规律。
2. 失去封闭性：程序在并发执行时，是多个程序共享系统中的各种资源，因而这些资源的状态将由多个程序来改变，致使程序的运行失去了封闭性。
3. 不可再现性：程序在并发执行时，由于失去了封闭性，也将导致其再失去可再现性。

### 进程的特征和状态
1. 进程的特征和定义
    1. 结构特征
        - PCB:通常的程序是不能并发执行的。为使程序(含数据)能独立运行，应为之配置一进程控制块，即 PCB(Process Control Block);
        - 由程序段、相关的数据段和 PCB 三部分便构成了进程实体。
    2. 动态性
        - 进程的实质是进程实体的一次执行过程，因此，动态性是进程的最基本的特征。
    3. 并发性
        - 多个进程实体同存于内存中，且能在一段时间内同时运行。而程序(没有建立 PCB)是不能并发执行的。
    4. 独立性
        - 进程实体是一个能独立运行、独立分配资源和独立接受调度的基本单位。
    5. 异步性
        - 进程按各自独立的、 不可预知的速度向前推进，或说进程实体按异步方式运行。
    6. 进程定义
        - 进程是进程实体的运行过程，是系统进行资源分配和调度的一个独立单位。
2. 进程的三种基本状态
    1. 就绪状态
        - 当进程已分配到除 CPU 以外的所有必要资源后，只要再获得 CPU，便可立即执行。
    2. 执行状态
        - 进程已获得 CPU，其程序正在执行。
    3. 阻塞状态
        - 在执行的进程由于发生某事件而暂时无法继续执行时，便放弃处理机而处于暂停状态，亦即进程的执行受到阻塞，把这种暂停状态称为阻塞状态，有时也称为等待状态或封锁状态。
3. 挂起状态
    1. 引入挂起状态的原因
        - 终端用户的请求
        - 父进程请求
        - 负荷调节的需要
        - 操作系统的需要
    2. 进程状态的转换
        - 活动就绪→静止就绪
        - 活动阻塞→静止阻塞
        - 静止就绪→活动就绪
        - 静止阻塞→活动阻塞
4. 创建状态和终止状态
    1. 创建状态：
        * 首先，为一个新进程创建 PCB，并填写必要的管理信息;
        * 其次，把该进程转入就绪状态并插入就绪队列之中。
    2. 终止状态
        * 首先等待操作系统进行善后处理，然后将其 PCB 清零，并将 PCB 空间返还系统。
        * 当一个进程到达了自然结束点，或是出现了无法克服的错误，或是被操作系统所终结，或是被其他有终止权的进程所终结，它将进入终止状态。
5. 进程控制块
    1. 进程控制块的作用
        - PCB 中记录了操作系统所需的、用于描述进程的当前情况以及控制进程运行的全部信息。
        - 使一个在多道程序环境下不能独立运行的程序(含数据)，成为一个能独立运行的基本单位，一个能与其它进程并发执行的进程。
        - 在调度到某进程后，要根据其 PCB 中所保存的处理机状态信息，设置该进程恢复运行的现场，并根据其 PCB 中的程序和数据的内存始址，找到其程序和数据。
        - 进程在执行过程中，当需要和与之合作的进程实现同步、通信或访问文件时，也都需要访问 PCB。
        - 当进程由于某种原因而暂停执行时，又须将其断点的处理机环境保存在PCB 中。
    2. 进程控制块中的信息
        - 进程标识符：内部标识符和外部标识符
        2. 处理机状态
            - 处理机状态信息主要是由处理机的各种寄存器中的内容组成的。处理机在运行时，许多信息都放在寄存器中。当处理机被中断时，所有这些信息都必须保存在 PCB 中，以便在该进程重新执行时，能从断点继续执行。寄存器包含：通用寄存器，指令计数器，程序状态字PSW，用户栈指针。
        3. 进程调度信息
            - 进程状态，指明进程的当前状态，作为进程调度和对换时的依据
            - 进程优先级，用于描述进程使用处理机的优先级别的一个整数，优先级高的进程应优先获得处理机
            - 进程调度所需的其它信息，它们与所采用的进程调度算法有关，比如，进程已等待 CPU 的时间总和、进程已执行的时间总和等
            - 事件，指进程由执行状态转变为阻塞状态所等待发生的事件，即阻塞原因
        4. 进程控制信息
            - 程序和数据的地址，指进程的程序和数据所在的内存或外存地(首)址，以便再调度到该进程执行时，能从 PCB 中找到其程序和数据
            - 进程同步和通信机制，指实现进程同步和进程通信时必需的机制，如消息队列指针、信号量等，它们可能全部或部分地放在 PCB 中
            - 资源清单，即一张列出了除 CPU 以外的、进程所需的全部资源及已经分配到该进程的资源的清单
            - 链接指针，它给出了本进程(PCB)所在队列中的下一个进程的 PCB 的首地址
    3. 进程控制块的组织方式
        * 在一个系统中，通常可拥有数十个、 数百个乃至数千个 PCB。为了能对它们加以有效的管理，应该用适当的方式将这些 PCB 组织起来
            - 链接方式：这是把具有同一状态的 PCB，用其中的链接字链接成一个队列
            - 索引方式：系统根据所有进程的状态建立几张索引表。例如，就绪索引表、阻塞索引表等，并把各索引表在内存的首地址记录在内存的一些专用单元中。