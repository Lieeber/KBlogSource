---
title: 进程同步
tags:
  - 进程
categories:
  - 操作系统
date: 2017-04-20 20:01:15
---
### 进程同步的基本概念
1. 两种形式的制约关系
    1. 间接相互制约关系
        * 同处于一个系统中的进程，通常都共享着某种系统资源，如共享 CPU、共享 I/O 设备等。
    2. 直接相互制约关系
        * 种制约主要源于进程间的合作。
2. 临界资源
    1. 许多硬件资源如打印机、磁带机等，都属于临界资源(Critical Resouce)，诸进程间应采取互斥方式，实现对这种资源的共享。
3. 临界区
    1. 不论是硬件临界资源，还是软件临界资源，多个进程必须互斥地对它进行访问。人们把在每个进程中访问临界资源的那段代码称为临界区(critical section)。
4. 同步机制应遵循的恩规则
    1. 空闲让进。当无进程处于临界区时，表明临界资源处于空闲状态，应允许一个请求进入临界区的进程立即进入自己的临界区，以有效地利用临界资源。
    2. 忙则等待。当已有进程进入临界区时，表明临界资源正在被访问，因而其它试图进入临界区的进程必须等待，以保证对临界资源的互斥访问。
    3. 有限等待。对要求访问临界资源的进程，应保证在有限时间内能进入自己的临界区，以免陷入“死等”状态。
    4. 让权等待。当进程不能进入自己的临界区时，应立即释放处理机，以免进程陷入“忙等”状态。
<!-- more -->

### 信号量机制
1. 整型信号量
2. 记录型信号量
3. AND型信号量
4. 信号量集

### 信号量的应用
1. 利用信号量实现进程互斥
2. 利用信号量实现前趋关系

### 管程机制
1. 管程的定义
    1. 代表共享资源的数据结构，以及由对该共享数据结构实施操作的一组过程所组成的资源管理程序，共同构成了一个操作系统的资源管理模块，我们称之为管程。
2. 管程的组成
    1. 管程的名称
    2. 局部于管程内部的共享数据设置初始值的语句
    3. 对该数据结构进行操作的一组过程
    4. 对局部于管程内部的共享数据设置初始值的语句
3. 管程的特性
    1. 模块化：管程是一个基本程序单位，可以单独编译
    2. 抽象数据类型：管程中不仅有数据，而且有对数据的操作
    3. 信息掩蔽，管程中的数据结构只能被管程中的过程访问，这些过程也是在管程内部定义的，供管程外的进程调用，而管程中的数据结构以及过程的具体实现外部都不可见。
    4. 管程和进程的不同主要体现在：
        * 虽然二者都定义了数据结构，但进程定义的是私有数据结构 PCB，管程定义的是公共数据结构，如消息队列等;
        * 二者都存在对各自数据结构上的操作，但进程是由顺序程序执行有关的操作，而管程主要是进行同步操作和初始化操作;
        * 设置进程的目的在于实现系统的并发性，而管程的设置则是解决共享资源的互斥使用问题;
        * 进程通过调用管程中的过程对共享数据结构实行操作，该过程就如通常的子程序一样被调用，因而管程为被动工作方式，进程则为主动工作方式;
        * 进程之间能并发执行，而管程则不能与其调用者并发;
        * 进程具有动态性，由“创建”而诞生，由“撤销”而消亡，而管程则是操作系统中的一个资源管理模块，供进程调用。
4. 条件变量

### 经典进程的同步问题
1. 生产者—消费者问题
    1. 利用记录型信号量解决生产者—消费者问题
    2. 利用 AND 信号量解决生产者—消费者问题
    3. 利用管程解决生产者—消费者问题
2. 哲学家进餐问题
    1. 利用记录型信号量解决哲学家进餐问题
    2. 利用AND信号量解决哲学家进餐问题
3. 读者—写者问题
    1. 利用记录型信号量解决
    2. 利用信号量机制解决